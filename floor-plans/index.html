<!-- Library Floor Plan (Current) -->
<section id="library-floor-plans" aria-labelledby="floor-plans-heading">
  <h1 id="floor-plans-heading">Dupré Library Floor Plans</h1>

  <p>
    In addition to the book collection, Dupré Library provides service areas,
    computer labs, a classroom, public spaces, and group and individual study
    spaces. It also features special collections ranging from U.S. Government
    publications to rare manuscripts.
  </p>

  <p>
    View the <a href="/about-us/library-floor-plan#catalog">Dupré Library Catalog Guide</a>
    for an explanation of areas found in the
    <a href="/research/search-library-catalog">Library Catalog</a>. More information
    is available from the <a href="/contact-us/department-directory">Department Directory</a>.
  </p>

  <h2>1st Floor</h2>
  <p><strong>General Stacks Call Numbers: H, J, K, Z</strong></p>

  <!-- 1st floor image (responsive) -->
  <img id="img-floor-1"
       src="floor-plans/Dupre-1st-Floor-Map.png"
       alt="Dupré Library - 1st Floor Map"
       usemap="#floor-map-f1"
       style="max-width:100%;height:auto;display:block;"
       />

  <h2>2nd Floor</h2>
  <p><strong>General Stacks Call Numbers: L, M, N, P, Q, R, S, T, U, V</strong></p>

  <!-- 2nd floor image (responsive) -->
  <img id="img-floor-2"
       src="floor-plans/Dupre-2nd-Floor-Map.png"
       alt="Dupré Library - 2nd Floor Map"
       usemap="#floor-map-f2"
       style="max-width:100%;height:auto;display:block;"
       />

  <h2>3rd Floor</h2>
  <p><strong>General Stacks Call Numbers: A, B, C, D, E, F, G</strong></p>

  <!-- 3rd floor image (responsive) -->
  <img id="img-floor-3"
       src="floor-plans/Dupre-3rd-Floor-Map.png"
       alt="Dupré Library - 3rd Floor Map"
       usemap="#floor-map-f3"
       style="max-width:100%;height:auto;display:block;"
       />

  <!-- Accessible legend (optional) -->
  <div id="floor-plan-legend" aria-hidden="false" style="margin-top:0.5rem;">
    <p><em>Click on an area of a map to open the related service or collection in a new tab.</em></p>
  </div>
</section>

<!-- IMAGE MAPS: placed outside paragraph elements and with valid semantics -->
<map id="floor-map-f1" name="floor-map-f1">
  <area alt="Advance Student Research Center" title="Advance Student Research Center" coords="903,235,955,346" data-for="advanceCenter" href="https://advance.louisiana.edu/" shape="rect" target="_blank" />
  <area alt="Board Games - Library of Things" title="Board Games - Library of Things" coords="102,91,166,133" data-for="boardGames" href="https://ull.ent.sirsi.net/client/en_US/ull/search/results?qf=ITYPE%09Material+Type%0921%3ABOARDGAME%09Library+of+Things+-+Board+Game&amp;qf=LIBRARY%09Library%0921%3AULL-DUPRE%09Edith+Garland+Dupre+Library&amp;te=SD_ULL" shape="rect" target="_blank" />
  <area alt="Bibliographic Instruction Laboratory (Bib Lab)" title="Bib Lab / SMART Classroom" coords="418,305,512,369" data-for="bibLab" href="/services/instructional-services/policies-procedures#SMART" shape="rect" target="_blank" />
  <area alt="Browsing Bookshelf" title="Browsing Bookshelf" coords="614,262,657,284" data-for="browsingShelf" href="/research/search-library-catalog#browse" shape="rect" target="_blank" />
  <area alt="Interlibrary Loan (ILL) - desk area" title="Interlibrary Loan" coords="748,229,793,264" data-for="ill_Area" href="/services/interlibrary-loan" shape="rect" target="_blank" />
  <area alt="Interlibrary Loan (ILL) - request textbox" title="Interlibrary Loan" coords="796,210,874,248" data-for="ill_Textbox" href="/services/interlibrary-loan" shape="rect" target="_blank" />
  <area alt="Jazzman's Café" title="Jazzman's Café & Bakery" coords="47,237,101,270" data-for="jazzman" href="https://ullafayette.sodexomyway.com/en-us/locations/" shape="rect" target="_blank" />
  <area alt="Leisure Reading Collection" title="Leisure Reading Collection" coords="102,133,166,235" data-for="leisureCollection" href="https://louisiana.libguides.com/leisurereadingcollection/collection" shape="rect" target="_blank" />
  <area alt="Research and Access Services (Back Desk)" title="Reference & Research Services" coords="29,282,97,315" data-for="circBack" href="/services/reference-research-services" shape="rect" target="_blank" />
  <area alt="Circulation Services" title="Circulation Services" coords="721,321,775,359" data-for="circulation" href="/services/circulation-services" shape="rect" target="_blank" />
  <area alt="Reference Services" title="Reference Services" coords="776,321,830,359" data-for="reference" href="/services/reference-research-services" shape="rect" target="_blank" />
  <area alt="Library of Things" title="Library of Things" coords="714,360,830,399" data-for="libraryOfThings" href="https://louisiana.libguides.com/DupreLoT" shape="rect" target="_blank" />
  <area alt="STEP Lab (1st floor)" title="STEP Lab" coords="657,418,762,519" data-for="stepLab_1" href="/about-us/technology-library/step-lab" shape="rect" target="_blank" />
  <area alt="Stacks H to HF" title="Stacks: H - HF" coords="433,405,534,440" data-for="stacks_hTohf" href="https://www.loc.gov/aba/cataloging/classification/lcco/lcco_h.pdf" shape="rect" target="_blank" />
  <area alt="Stacks HF to HX" title="Stacks: HF - HX" coords="273,405,371,439" data-for="stacks_hfTohx" href="https://www.loc.gov/aba/cataloging/classification/lcco/lcco_h.pdf" shape="rect" target="_blank" />
  <area alt="Stacks HX to K" title="Stacks: HX - K" coords="178,359,245,393" data-for="stacks_hxToK" href="https://www.loc.gov/catdir/cpso/lcco/" shape="rect" target="_blank" />
  <area alt="Stacks Z" title="Stacks: Z" coords="116,54,151,87" data-for="stacks_z" href="https://www.loc.gov/aba/cataloging/classification/lcco/lcco_z.pdf" shape="rect" target="_blank" />
  <area alt="Study carrels (1 of 2)" title="Individual Study Carrels" coords="378,378,408,417" data-for="studyCarrels1" href="/services/circulation-services/policies-procedures/study-spaces#individual" shape="rect" target="_blank" />
  <area alt="Study carrels (2 of 2)" title="Individual Study Carrels" coords="378,428,408,516" data-for="studyCarrels2" href="/services/circulation-services/policies-procedures/study-spaces#individual" shape="rect" target="_blank" />
  <area alt="U.S. Government Documents" title="U.S. Government Documents" coords="522,166,599,259" data-for="govDocs" href="/collections/us-government-information" shape="rect" target="_blank" />
  <area alt="Writing Lab" title="Writing Lab (UL Lafayette Department of English)" coords="812,137,863,180" data-for="writingLab" href="https://english.louisiana.edu/writinglab" shape="rect" target="_blank" />
</map>

<map id="floor-map-f2" name="floor-map-f2">
  <area alt="Study carrels (1 of 2)" title="Individual Study Carrels" coords="459,31,765,52" data-for="studyCarrels1_2" href="/services/circulation-services/policies-procedures/study-spaces#individual" shape="rect" target="_blank" />
  <area alt="Study carrels (2 of 2)" title="Individual Study Carrels" coords="392,306,422,516" data-for="studyCarrels2_2" href="/services/circulation-services/policies-procedures/study-spaces#individual" shape="rect" target="_blank" />
  <area alt="Group study rooms" title="Group Study Rooms" coords="871,359,905,544" data-for="studyRooms" href="/services/circulation-services/policies-procedures/study-spaces#group" shape="rect" target="_blank" />
  <area alt="Search library catalog (1 of 2)" title="Search library catalog" coords="700,343,716,360" data-for="opac_1" href="https://ull.ent.sirsi.net/client/en_US/ull" shape="rect" target="_blank" />
  <area alt="Search library catalog (2 of 2)" title="Search library catalog" coords="333,294,348,310" data-for="opac_2" href="https://ull.ent.sirsi.net/client/en_US/ull" shape="rect" target="_blank" />
  <area alt="Stacks L to N" title="Stacks: L - N" coords="723,427,790,457" data-for="stacks_l_to_n" href="https://www.loc.gov/catdir/cpso/lcco/" shape="rect" target="_blank" />
  <area alt="Stacks N to QD (1 of 2)" title="Stacks: N - QD" coords="460,427,544,457" data-for="stacks_n_to_qd_1" href="https://www.loc.gov/catdir/cpso/lcco/" shape="rect" target="_blank" />
  <area alt="Stacks P to PZ (1 of 4)" title="Stacks: P - PZ" coords="581,172,670,202" data-for="stacks_p_to_pz_1" href="https://www.loc.gov/aba/cataloging/classification/lcco/lcco_p.pdf" shape="rect" target="_blank" />
  <area alt="Stacks S to TA" title="Stacks: S - TA" coords="318,189,390,219" data-for="stacks_s_to_ta" href="https://www.loc.gov/catdir/cpso/lcco/" shape="rect" target="_blank" />
  <area alt="Stacks TA to VM" title="Stacks: TA - VM" coords="178,189,267,219" data-for="stacks_ta_to_vm" href="https://www.loc.gov/catdir/cpso/lcco/" shape="rect" target="_blank" />
  <area alt="Stacks QD to RT (1 of 4)" title="Stacks: QD - RT" coords="229,427,321,457" data-for="stacks_qd_to_rt_1" href="https://www.loc.gov/catdir/cpso/lcco/" shape="rect" target="_blank" />
  <area alt="STEP Lab (2nd floor)" title="STEP Lab" coords="737,297,797,360" data-for="stepLab_2" href="/about-us/technology-library/step-lab" shape="rect" target="_blank" />
</map>

<map id="floor-map-f3" name="floor-map-f3">
  <area alt="Blanco Public Policy Center" title="Blanco Public Policy Center" coords="101,31,276,280" data-for="blancoCenter" href="https://blancocenter.louisiana.edu/" shape="rect" target="_blank" />
  <area alt="Cajun and Creole Music Collection (CCMC, 1 of 2)" title="CCMC collection" coords="85,293,206,331" data-for="ccmc_1" href="/collections/ccmc" shape="rect" target="_blank" />
  <area alt="Cajun and Creole Music Collection (CCMC, 2 of 2)" title="CCMC collection" coords="25,341,106,398" data-for="ccmc_2" href="/collections/ccmc" shape="rect" target="_blank" />
  <area alt="Center for Louisiana Studies" title="Center for Louisiana Studies" coords="820,33,908,205" data-for="laStudies" href="https://louisianastudies.louisiana.edu/" shape="rect" target="_blank" />
  <area alt="Ernest J. Gaines Center" title="Ernest J. Gaines Center" coords="107,341,173,454" data-for="gainesCenter" href="https://louisiana.edu/ernestgaines" shape="rect" target="_blank" />
  <area alt="Network Services (1 of 2)" title="Network Services" coords="781,346,908,507" data-for="networkServices_1" href="https://it.louisiana.edu/departments/informationmedia-networks" shape="rect" target="_blank" />
  <area alt="Network Services (2 of 2)" title="Network Services" coords="859,507,908,566" data-for="networkServices_2" href="https://it.louisiana.edu/departments/informationmedia-networks" shape="rect" target="_blank" />
  <area alt="Search library catalog" title="Search library catalog" coords="702,356,719,374" data-for="opac_3" href="https://ull.ent.sirsi.net/client/en_US/ull" shape="rect" target="_blank" />

  <area alt="Special Collections (1 of 4)" title="Special Collections" coords="634,73,765,120" data-for="specialCollections_1" href="/collections" shape="rect" target="_blank" />
  <area alt="Special Collections (2 of 4) - Archives" title="University Archives & Manuscripts" coords="634,120,765,147" data-for="specialCollections_2" href="/collections/university-archives-acadiana-manuscripts" shape="rect" target="_blank" />
  <area alt="Special Collections (3 of 4) - Louisiana Collection" title="Louisiana Collection" coords="634,147,765,174" data-for="specialCollections_3" href="/collections/louisiana-collection" shape="rect" target="_blank" />
  <area alt="Special Collections (4 of 4) - Jefferson Caffery Reading Room" title="Jefferson Caffery Reading Room" coords="634,174,781,209" data-for="specialCollections_4" href="/collections/louisiana-collection#jcrr" shape="rect" target="_blank" />

  <!-- fixed coords ordering (left,top,right,bottom) -->
  <area alt="Stacks A to D (1 of 2)" title="Stacks: A - D" coords="669,459,738,488" data-for="stacks_a_to_d_1" href="https://www.loc.gov/catdir/cpso/lcco/" shape="rect" target="_blank" />
  <area alt="Stacks D to GV (1 of 2)" title="Stacks: D - GV" coords="440,462,522,498" data-for="stacks_d_to_gv_1" href="https://www.loc.gov/catdir/cpso/lcco/" shape="rect" target="_blank" />

  <area alt="Student-Athlete Academic Center (1 of 2)" title="Student-Athlete Academic Center" coords="174,341,390,512" data-for="athleteCenter_1" href="https://studentathlete.louisiana.edu/" shape="rect" target="_blank" />
  <area alt="Student-Athlete Academic Center (2 of 2)" title="Student-Athlete Academic Center" coords="247,512,390,564" data-for="athleteCenter_2" href="https://studentathlete.louisiana.edu/" shape="rect" target="_blank" />
</map>

<!-- SCRIPT: robust map attachment + responsive map resizer -->
<script>
/* Robust map setter:
   - finds the floor number in the filename (1, 2 or 3)
   - sets the usemap attribute on the image element
*/
function setMap(imgEl) {
  if (!imgEl) return;
  const src = imgEl.getAttribute('src') || '';
  // Try to extract a single digit (1,2,3) from patterns like "-1st-", "-2-", "_3_", "floor-1"
  const m = src.match(/[-_](\d)(?:st|nd|rd|th)?[-_.]/i) || src.match(/floor[-_.]?(\d)\b/i);
  if (m && m[1]) {
    imgEl.setAttribute('usemap', '#floor-map-f' + m[1]);
  }
}

/* Responsive image map resizer:
   - stores original coords in data-original-coords
   - rescales coords according to displayed image width
   - works for rect coords (left,top,right,bottom) and will preserve other shapes if present
*/
function makeImageMapsResponsive() {
  // helper: parse coords string into array of numbers
  function parseCoords(coords) {
    return coords.split(',').map(function(s){ return parseFloat(s); });
  }

  // helper: join coords array into string
  function coordsToString(arr) {
    return arr.join(',');
  }

  // prepare each image with a map
  document.querySelectorAll('img[usemap]').forEach(function(img) {
    var mapName = img.getAttribute('usemap').replace('#','');
    var map = document.getElementById(mapName);
    if (!map) return;

    // ensure the image has naturalWidth available
    if (!img.complete) {
      img.addEventListener('load', function() { storeAndResize(img, map); });
    } else {
      storeAndResize(img, map);
    }
  });

  function storeAndResize(img, map) {
    var naturalWidth = img.naturalWidth || img.offsetWidth;
    var naturalHeight = img.naturalHeight || img.offsetHeight;
    if (!img.dataset.coordsStored) {
      // store original coords on each area
      map.querySelectorAll('area').forEach(function(area) {
        var orig = area.getAttribute('coords') || '';
        area.dataset.originalCoords = orig;
      });
      img.dataset.coordsStored = 'true';
      img.dataset.naturalWidth = naturalWidth;
      img.dataset.naturalHeight = naturalHeight;
    }
    resizeMap(img, map);
  }

  function resizeMap(img, map) {
    var w = img.clientWidth;
    var h = img.clientHeight;
    var naturalW = parseFloat(img.dataset.naturalWidth) || w;
    var naturalH = parseFloat(img.dataset.naturalHeight) || h;
    var scaleX = w / naturalW;
    var scaleY = h / naturalH;

    map.querySelectorAll('area').forEach(function(area) {
      var orig = area.dataset.originalCoords;
      if (!orig) return;
      var nums = parseCoords(orig);
      if (nums.length >= 4) {
        // scale all coordinates (works for rect and polygon)
        var scaled = nums.map(function(n, i) {
          // even index => x (scaleX), odd index => y (scaleY)
          return (i % 2 === 0) ? Math.round(n * scaleX) : Math.round(n * scaleY);
        });
        area.setAttribute('coords', coordsToString(scaled));
      }
    });
  }

  // initial resize + on window resize
  function resizeAllMaps() {
    document.querySelectorAll('img[usemap]').forEach(function(img) {
      var mapName = img.getAttribute('usemap').replace('#','');
      var map = document.getElementById(mapName);
      if (map) resizeMap(img, map);
    });
  }

  window.addEventListener('resize', function() {
    // throttle using requestAnimationFrame
    if (window._mapResizeRAF) cancelAnimationFrame(window._mapResizeRAF);
    window._mapResizeRAF = requestAnimationFrame(resizeAllMaps);
  });

  // initial call
  resizeAllMaps();
}

/* Wait for colorbox images when using a modal / colorbox plugin:
   - selector should match the image element inside the colorbox container
   - when a colorbox image appears, setMap() will run to ensure its usemap is set
*/
function waitForColorboxes(selector) {
  return new Promise(function(resolve) {
    if (document.querySelector(selector)) return resolve(document.querySelector(selector));
    var observer = new MutationObserver(function(mutations) {
      if (document.querySelector(selector)) {
        observer.disconnect();
        resolve(document.querySelector(selector));
      }
    });
    observer.observe(document.body, { childList: true, subtree: true });
  });
}

/* When DOM is ready:
   - attach maps for inline images
   - initialize responsive map logic
   - attach to colorbox-loaded images if your site uses colorbox
*/
document.addEventListener('DOMContentLoaded', function() {
  // attach maps for inline images already on the page
  ['img-floor-1','img-floor-2','img-floor-3'].forEach(function(id) {
    var el = document.getElementById(id);
    if (el) setMap(el);
  });

  // initialize responsive maps
  makeImageMapsResponsive();

  // If you use colorbox (or similar) to show a larger version in a modal,
  // ensure the modal image gets the correct usemap and is resized:
  waitForColorboxes('#cboxContent #cboxLoadedContent img').then(function(img) {
    setMap(img);
    // Once the modal opens and image is loaded, run resizer
    img.addEventListener('load', function() {
      makeImageMapsResponsive();
    });
  });
});
</script>
